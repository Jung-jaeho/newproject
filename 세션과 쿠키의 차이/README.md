
# 5. Cookie and Session

서버와 클라이언트가 통신을 할 때 통신이 연속적으로 이어지지 않고 한 번 통신이 되면 끊어진다. 따라서 서버는 클라이언트가 누구인지 계속 인증을 해주어야 합니다.

하지만 그것은 매우 귀찮고 번거로운 일 입니다. 또한 웹페이지의 로딩을 느리게 만드는 요인이 되기도 합니다.

그런 번거로움을 해결하는 방법이 바로 쿠키와 세션입니다.

![main_img2](./img/main_img2.png)

## Cookie
하이퍼 텍스트의 기록서(HTTP)의 일종으로 인터넷 사용자가 어떠한 웹 사이트를 방문할 경우 그 사이트가 사용하고 있는 서버에서 인터넷 사용자의 컴퓨터에 설치하는 작은 기록 정보 파일입니다.

쿠키 동작순서

1. 클라이언트가 페이지를 요청

2. 웹 서버는 쿠키를 생성

3. 생성한 쿠키에 정보를 담아 HTTP 화면을 돌려줄 때 같이 클라이언트에게 돌려주기

4. 넘겨 받은 쿠키는 클라이언트가 가지고 있다가 다시 서버에 요청할 때 요청과 함께 전송

5. 이때 웹 서버는 정보를 변경할 필요가 있으면 쿠키를 업데이트하여 응답과 함께 변경된 쿠키를 클라이언트에게 주기

6. 재 방문시 클라이언트의 메모리에 저장되어 있다면 요청 페이지와 함께 쿠키를 전송


### 쿠키 사용의 예

- 팝업이 나타났을 경우 '하루동안 이 창을 열지 않음'을 누르면 하룻동안은 팝업창이 뜨지 않는 현상

- 서버의 요청이 잇을 때 다시 서버로 보내주는 문자열 정보

- 브라우저에서의 정보들이 저장된 텍스트 파일 (사용자 닉네임, 접속 시간, 정버구니 등등)

- 사용자의 편의를 위한 것 (중요도가 낮은 정보들)

<br>



## Session

일정 시간동안 같은 사용자(브라우저)로부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 일정하게 유지시키는 기술입니다.

여기서 일정 시간은 방문자가 웹 브라우저를 통해 웹 서버에 접속한 시점으로부터 웹 브라우저를 종료하여 연결을 끝내는 시점을 말합니다.

세션의 동작 순서

1. 클라이언트가 서버로 접속(요청)을 시도

2. 서버는 접근한 클라이언트의 Request-Header field인 Cookie를 확인하여 클라이언트가 해당 session-id를 보냈는지 확인

3. 만약 session-id가 존재하지 않는다면 서버는 session-id를 생성해 클라이언트에게 주기

4. 서버에서 클라이언트로 돌려준 session-id를 쿠키를 사용해 서버에 저장(쿠키 이름은 JSESSIONID).

5. 클라이언트는 재접속 시, 이 쿠키(JSESSIONID)를 이용하여 session-id 값을 서버에 전달


세션의 사용 예

- 화면이 이동해도 로그인이 풀리지 않고 로그아웃하기 전까지 유지되고 있는 것

- 사용자의 로그인ID, 비밀번호

- 노출되면 안되는 정보들

 ## 쿠키와 세션의 차이
![main_img1](./img/main_img1.png)

<br>
<br>
<br>